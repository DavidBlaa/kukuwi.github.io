import"../chunks/disclose-version.Bg9kRutz.js";import{aa as le,i as oe,A as ue,a4 as fe,c as m,r as v,t as V,g as t,p as te,s as x,n as Z,a as ae,b as F,d as z,f as E,e as L,u as de}from"../chunks/runtime.BFcw_75_.js";import{a as ce,s as re}from"../chunks/render.DJfPp5iK.js";import{i as B}from"../chunks/if.BqcDyKEL.js";import{a as d,t as h,b as q,c as C}from"../chunks/template.B-ObnXcP.js";import{b as ve,p as J}from"../chunks/props.073RLZyP.js";import{o as ge}from"../chunks/index-client.Bxs-rmcU.js";import{G as me}from"../chunks/GuessingGame.AJKTX8rn.js";import{e as xe,i as he}from"../chunks/each.CJS3MHhM.js";import{a as be,r as _e,B as K}from"../chunks/Button3d.SKqD834h.js";import{I as pe,F as ye}from"../chunks/Icon.BkZ-OBnt.js";import{P as ke}from"../chunks/PatternGame.B_7XJkNn.js";import{h as O}from"../chunks/HighscoreStore.XOk-sm9k.js";import{g as X}from"../chunks/entry.DRg3m0m5.js";import{b as Y}from"../chunks/paths.DCwD0S_x.js";function Fe(e,n,i=n){var s=le();ce(e,"input",r=>{var a=r?e.defaultValue:e.value;if(a=M(e)?U(a):a,i(a),s&&a!==(a=n())){var l=e.selectionStart,o=e.selectionEnd;e.value=a??"",o!==null&&(e.selectionStart=l,e.selectionEnd=Math.min(o,e.value.length))}}),(oe&&e.defaultValue!==e.value||ue(n)==null&&e.value)&&i(M(e)?U(e.value):e.value),fe(()=>{var r=n();M(e)&&r===U(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function M(e){var n=e.type;return n==="number"||n==="range"}function U(e){return e===""?null:+e}const D=[{game:"klangQuiz",difficulty:1},{game:"klangQuiz",difficulty:2},{game:"pattern",difficulty:1},{game:"klangQuiz",difficulty:4},{game:"pattern",difficulty:2},{game:"klangQuiz",difficulty:3},{game:"pattern",difficulty:3},{game:"klangQuiz",difficulty:2},{game:"klangQuiz",difficulty:4},{game:"pattern",difficulty:2}];var ze=h("<div><!></div>"),Be=h('<div class="flex w-4/5"></div>');function we(e,n){var i=Be();xe(i,21,()=>n.roundHistory,he,(s,r,a)=>{var l=ze(),o=m(l);{var b=g=>{pe(g,{size:"80%",color:"#525252",src:ye})};B(o,g=>{a===n.round-1&&g(b)})}v(l),V(()=>be(l,`mx-[0.2rem] flex h-8 w-[10%] items-center justify-center border-2 border-neutral-600 ${t(r)?"bg-green-500":t(r)===!1?"bg-red-500":"bg-neutral-100"}`)),d(s,l)}),v(i),d(e,i)}var Ge=h('<div class="fixed inset-0 z-50 flex items-center justify-center"><div class="absolute inset-0 bg-black opacity-50"></div> <div class="z-50 flex h-3/5 w-2/5 flex-col items-center justify-evenly rounded-2xl bg-kukuwi-blue shadow-xl"><div class="text-center"><h2 class="text-4xl font-bold text-white">Punktzahl:</h2> <h2 class="mt-5 text-8xl font-extrabold text-yellow-500 drop-shadow-[0_4px_4px_rgba(0,0,0,0.8)]"> </h2></div> <input class="z-60 basis-1/12 rounded-2xl border-black bg-white text-center text-2xl" placeholder="Spielername eingeben"> <div class="flex flex-col gap-y-4 text-3xl text-white"><!> <!></div></div></div>');function ee(e,n){te(n,!0);let i=ve(n,"score",3,4e3),s=z("");function r(){O&&O.update(u=>{for(const G of u)G.highlight=!1;return u.push({name:t(s),points:i(),highlight:!0}),u}),X(Y+"/Bestenliste")}var a=Ge(),l=x(m(a),2),o=m(l),b=x(m(o),2),g=m(b,!0);v(b),v(o);var _=x(o,2);_e(_);var w=x(_,2),p=m(w);K(p,{bgBack:"bg-green-600",bgFront:"bg-green-500",onclick:r,padding:"p-3",children:(u,G)=>{Z();var I=q("Abschicken");d(u,I)},$$slots:{default:!0}});var Q=x(p,2);K(Q,{bgBack:"bg-red-600",bgFront:"bg-red-500",onclick:()=>X(Y+"/"),padding:"p-3",children:(u,G)=>{Z();var I=q("Überspringen");d(u,I)},$$slots:{default:!0}}),v(w),v(l),v(a),V(()=>re(g,i())),Fe(_,()=>t(s),u=>F(s,u)),d(e,a),ae()}var Ie=h('<div class="flex size-full flex-col items-center justify-center gap-28"><h1 class="text-9xl font-extrabold text-neutral-600"> </h1> <!></div>'),Se=h("<!> <!>",1),Pe=h("<!> <!>",1),Qe=h("<p>Wrong game specified in playthrough.ts!</p>"),Te=h('<main class="h-screen w-screen bg-blue-200 p-5"><!></main>');function Je(e,n){te(n,!0);const i=D.length;let s=z(1),r=L(()=>D[t(s)-1]),a=z(!1),l=z(.4),o=z(0),b=J(Array(i).fill(void 0)),g=z(!0);ge(()=>_());function _(){F(g,!0),setTimeout(c,2e3);function c(){F(g,!1)}}function w(c){F(o,t(o)+c),b[t(s)-1]=c!==0,t(s)===i?F(a,!0):(de(s),_())}const p=L(()=>t(s)===i?"Zum Ergebnis":"Nächste Runde"),Q=L(()=>t(p));var u=Te(),G=m(u);{var I=c=>{var y=Ie(),S=m(y),j=m(S);v(S);var N=x(S,2);we(N,{get roundHistory(){return b},get round(){return t(s)}}),v(y),V(()=>re(j,`RUNDE ${t(s)??""}`)),d(c,y)},ne=c=>{var y=C(),S=E(y);{var j=k=>{var P=Se(),T=E(P);me(T,{get difficulty(){return t(r).difficulty},handleNextRound:w,get GIFButtonTextSuccess(){return t(p)},get GIFButtonTextFailure(){return t(Q)},get volume(){return t(l)},set volume(f){F(l,J(f))}});var $=x(T,2);{var A=f=>{ee(f,{get score(){return t(o)}})};B($,f=>{t(a)&&f(A)})}d(k,P)},N=k=>{var P=C(),T=E(P);{var $=f=>{var R=Pe(),W=E(R);ke(W,{get difficulty(){return t(r).difficulty},handleNextRound:w,get volume(){return t(l)},get GIFButtonTextSuccess(){return t(p)},get GIFButtonTextFailure(){return t(Q)}});var se=x(W,2);{var ie=H=>{ee(H,{get score(){return t(o)}})};B(se,H=>{t(a)&&H(ie)})}d(f,R)},A=f=>{var R=Qe();d(f,R)};B(T,f=>{t(r).game==="pattern"?f($):f(A,!1)},!0)}d(k,P)};B(S,k=>{t(r).game==="klangQuiz"?k(j):k(N,!1)},!0)}d(c,y)};B(G,c=>{t(g)?c(I):c(ne,!1)})}v(u),d(e,u),ae()}export{Je as component};
